/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.5.1/userguide/tutorial_java_projects.html
 */

buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:5.2.0'
    }
}

plugins {
    id "com.github.johnrengelman.shadow" version "5.2.0" apply false
}

ext.libraries = [
    spark_core: "org.apache.spark:spark-core_${SPARK_SUFFIX_VERSION}:${SPARK_CORE_VERSION}",
    spark_mllib: "org.apache.spark:spark-mllib_${SPARK_SUFFIX_VERSION}:${SPARK_MLLIB_VERSION}",
    hadoop_client: "org.apache.hadoop:hadoop-client:${HADOOP_CLIENT_VERSION}"
]

subprojects {
    apply plugin: 'java'
    apply plugin: 'application'
    apply plugin: 'com.github.johnrengelman.shadow'

    version = '1.0'

    repositories {
        jcenter()
    }

    configurations {
        // Spark should be included in the local class path both at compilation and at runtime, but it should be
        // excluded from the jar artifact
        sparkCompile

        // indicates what should be included in the jar artifact
        shadowCompile
    }

    // configuration for the shadow jar plugin
    shadowJar {
        zip64 true
        configurations = [subprojects.configurations.shadowCompile] // Exclude runtime-only path
    }
}